<div *ngIf="!(+qparams.requested)" class="detail-container flex flex-column full-body-height">
	
	<!-- item details -->
	<div *ngIf="item" class="detail-card scale-fontsize">
		<!-- <pre>{{item | json}}</pre> -->

		<!-- cover photo/gallery carousel -->
		<div class="fade-in">
			carousel
		</div>

		<!-- title card + user details -->
		<div class="title">
			<h2 class="title-header fade-in delay-0-2">{{item.name || 'Item name'}}</h2>
			<h5 class="item-user-name fade-in delay-0-3 pointer" (click)="navigateToOwnerProfile()">
				<svg><use href="assets/icons/navbar.svg#i-user"></use></svg>
				{{item.user.fullName || 'Anon'}}
			</h5>
			<hr class="fade-in delay-0-4" />
		</div>
		
		<!-- description -->
		<div class="desc-container fade-in delay-0-5">
			{{item.description}}
		</div>

		<!-- tags -->
		<div class="tags-container fade-in delay-0-6">
			{{item.tags || '#tags appear here'}}
		</div>



		<!-- controls -->
		<div class="item-controls-container flex fade-in-up delay-0-7" id="CONTROLS">

			<!-- if this item belongs to the currentUser, display additional controls -->
			<ng-container *ngIf="item.user.id == currentUser.id else notYou">
				<!-- edit item -->
				<div class="action-btn gradient-1-stop-2" title="Edit Item">
					<svg><use href="assets/icons/navbar.svg#i-edit"></use></svg>
				</div>
				<!-- delete item -->
				<div class="action-btn gradient-0-stop-1" title="Delete Item" (click)="deleteItem()">
					<svg><use href="assets/icons/navbar.svg#i-trash"></use></svg>
				</div>
			</ng-container>



			<!-- only display these controls if NOT the current user -->
			<ng-template #notYou>
				<!-- request -->
				<div class="action-btn gradient-0-stop-0" title="Request Item" (click)="requestItem()">
					<svg><use href="assets/icons/navbar.svg#i-heart"></use></svg>
				</div>
				<!-- message owner -->
				<div class="action-btn gradient-0-stop-2" title="Message Owner">
					<svg><use href="assets/icons/navbar.svg#i-mail"></use></svg>
				</div>
			</ng-template>
			

			<!-- user PUBLIC profile -->
			<div class="action-btn gradient-1-stop-0" title="Owner profile" (click)="navigateToOwnerProfile()">
				<svg><use href="assets/icons/navbar.svg#i-user"></use></svg>
			</div>

			<!-- link -->
			<div class="action-btn gradient-1-stop-1" title="Get link to item">
				<svg><use href="assets/icons/navbar.svg#i-link"></use></svg>
			</div>

		</div>

	</div>

	<!-- no item loaded error -->
	<div *ngIf="!item">no item loaded</div>

</div>





<!-- item successfully requested splash -->
<div *ngIf="+qparams.requested" class="requested-splash full-body-height gradient-0">
	<div class="form-column scale-fontsize">
		<div>&nbsp;</div>

		<!-- animated send svg -->
		<svg id="SEND" class="animated-svg"><use href="assets/icons/navbar.svg#i-send"></use></svg>
		<div>
			<h2 class="fade-in-up delay-0-2">Request sent!</h2>
			<p class="fade-in-up delay-0-4">
				You've successfully requested <strong>{{item ? item.name : 'this item'}}</strong>. <br>
				You'll receive a notification when the owner makes a decision.
			</p>
		</div>
		<div class="control-container fade-in-up delay-0-6">
			<button class="nofill" (click)="returnToItemDetails()">Back to Item</button>
			<a routerLink="/"><button class="nofill">Home</button></a>
		</div>

		<div>&nbsp;</div>
	</div>
</div>


<router-outlet></router-outlet>